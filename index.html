<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Task Manager Pro</title>

  <!-- Manifest for PWA -->
  <link rel="manifest" href="manifest.json">

  <style>
    /* (Same CSS as before, with dark mode, progress bar, etc.) */
    :root {
      --bg: #f5f5f5; --text: #222; --accent: #0078ff;
      --card: #fff; --success: #00b894; --warn: #ff7675;
    }
    body.dark {
      --bg: #1e1e1e; --text: #f5f5f5; --card: #2b2b2b;
      --accent: #00c8ff; --success: #00e6a8; --warn: #ff6b6b;
    }
    body { font-family: "Segoe UI", sans-serif; background: var(--bg); color: var(--text); display:flex; justify-content:center; margin:0; min-height:100vh; transition:.4s;}
    .app { width:95%; max-width:800px; background:var(--card); margin:2rem 0; border-radius:15px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.1);}
    header { background:var(--accent); color:#fff; padding:1rem 1.5rem; display:flex; justify-content:space-between; align-items:center;}
    #themeToggle { background: rgba(255,255,255,0.2); border:none; color:white; padding:.5rem 1rem; border-radius:8px; cursor:pointer;}
    .content { padding:1.5rem; }
    form { display:grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 10px;}
    input, select { padding:.6rem; border-radius:6px; border:1px solid #ccc; font-size:1rem;}
    button { background: var(--accent); color:#fff; border:none; border-radius:6px; padding:.6rem 1rem; cursor:pointer;}
    .controls { display:flex; gap:10px; margin:1rem 0; flex-wrap:wrap; }
    .task-list { display:flex; flex-direction:column; gap:.6rem;}
    .task { display:flex; justify-content:space-between; align-items:center; border:1px solid #ddd; border-radius:8px; padding:.8rem 1rem; background:var(--card); transition:.2s;}
    .task.completed { text-decoration: line-through; opacity:.6;}
    .task.overdue { border-color:var(--warn); color:var(--warn);}
    .dashboard { display:flex; justify-content:space-between; margin-top:1rem;}
    .progress-bar { height: 12px; background: rgba(0,0,0,0.1); border-radius: 6px; overflow: hidden; margin-top: 6px; box-shadow: inset 0 0 4px rgba(0,0,0,0.2);}
    .progress-fill { height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--success)); transition: width 0.4s ease-in-out;}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Smart Task Manager Pro</h1>
      <button id="themeToggle">ðŸŒ™</button>
    </header>
    <div class="content">
      <form id="taskForm">
        <input type="text" id="taskInput" placeholder="Add a task..." required>
        <select id="priority"><option>Low</option><option selected>Medium</option><option>High</option></select>
        <input type="date" id="dueDate">
        <button type="submit">Add</button>
      </form>
      <div class="controls">
        <input type="text" id="search" placeholder="Search tasks..." style="flex:2">
        <select id="filter" style="flex:1">
          <option value="all">All</option>
          <option value="completed">Completed</option>
          <option value="pending">Pending</option>
        </select>
      </div>
      <div class="dashboard">
        <div>
          <strong id="stats"></strong>
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        </div>
      </div>
      <div id="taskList" class="task-list"></div>
    </div>
  </div>

  <script>
    // Service worker registration
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then
